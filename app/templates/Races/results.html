{% extends 'base.html' %}

{% block content %}

<H4> NO UPCOMING RACES DUE TO COVID. ALL RACES CURRENTLY CANCELLED - DON'T BLAME US !</H4>



    <section>
        <div>
            <h4>RECENT Results</h4>
        </div>
    </section>
    <section class="race-container">   
        {% for race in races  %}
        <table class="results">
            <thead>
                <tr>
                    <th colspan="4">{{ race.title }}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Position :</td>
                    <td>First Name :</td>
                    <td>Last Name :</td>
                    <td>Time :</td>
                </tr>
                {% set count = namespace(value=1) %}

                    {% for result in all_results %}
                    {% for runner in runners  %}
                        {% if runner.id == result.runner.id and race.id == result.race.id %}
                            <tr>
                                <td>
                                    {{ count.value }}
                                    {% set count.value = count.value + 1 %}
                                </td>
                                <td>
                                    {{ runner.first_name }}
                                </td>
                                <td>
                                    {{ runner.last_name }}
                                </td>
                                <td>
                                    {{ result.time}}
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                {% endfor %}

        </tbody>
        </table>

{% endfor %}
</section>

{% endblock content %}

